{% extends "base.html" %}
{% block title %} Home Page {% endblock%}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
{% endblock %}


{% block content %}


<!-- Hero Section -->
<header class="hero-section d-flex align-items-center justify-content-center text-white text-center">
  <div class="overlay"></div>
  <div class="hero-content">
    <h1 style="font-family: cursive;" class="display-5 fw-bold py-2">Nalepo Organization</h1>
    <h2 style="font-size: 25px; font-family: sans-serif;" class="fw-semibold mb-4 text-highlight">
      Empowering lives, restoring hope, and building a better tomorrow<br> through compassion and community-driven
      action.
    </h2>
    <div class="d-flex flex-wrap justify-content-center gap-3">
      <a href="#" class="btn btn-success px-4 py-2 fw-semibold but1" data-aos="slide-right" data-aos-delay="100"
        data-aos-duration="1000">Donate</a>
      <a href="#" class="btn btn-outline-light px-4 py-2 fw-semibold but1" data-aos="slide-left" data-aos-delay="100"
        data-aos-duration="1000">Volunteer</a>
    </div>
  </div>
</header>



<!-- Automated counter; Our Impact -->
<div class="nairobi position-relative">
  <img src="/static/image copy.png" alt="">

  <div class="contnai position-absolute top-0 start-50 translate-middle-x text-center text-white">
    <h1>Our Impact</h1>
    <h4>Audience Reached by Our Platform</h4>
  </div>

  <div class="position-absolute top-50 start-50 translate-middle">
    <div class="row">
      <!-- card 1 -->
      <div class="col-md-3">
        <div>

          <div class="card-body">

            <div class="container py-5">
              <div class="row justify-content-center">

                <div class=" text-center">
                  <div class="counter" data-target="5000">0</div>
                  <p class=" text-black mt-2"><strong>Children helped</strong></p>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- card 2 -->
      <div class="col-md-3">
        <div>

          <div class="card-body">

            <div class="container py-5 ">
              <div class="row justify-content-center">

                <div class="text-center">
                  <div class="counter" data-target="115">0</div>
                  <p class=" text-black mt-2"><strong>Global Organization reach</strong></p>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- card 3 -->
      <div class="col-md-3">
        <div>

          <div class="card-body">

            <div class="container py-5">
              <div class="row justify-content-center">

                <div class="text-center">
                  <div class="counter" data-target="1665">0</div>
                  <p class="text-black mt-2"><strong>Patnerships</strong></p>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- card 4 -->
      <div class="col-md-3">
        <div>

          <div class="card-body">

            <div class="container py-5">
              <div class="row justify-content-center">

                <div class="text-center">
                  <div class="counter" data-target="720">0</div>
                  <p class=" text-black mt-2"><strong> Employees</strong></p>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function animateCounter(counter, speed = 50) {
      const target = +counter.getAttribute("data-target");
      let count = 0;
      const increment = target / speed;

      function updateCounter() {
        count += increment;
        if (count < target) {
          counter.innerText = Math.ceil(count);
          requestAnimationFrame(updateCounter);
        } else {
          counter.innerText = target;
        }
      }

      updateCounter();
    }

    function startCounting(entries, observer) {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const counter = entry.target;
          counter.classList.add("show");
          animateCounter(counter, 100);
          observer.unobserve(counter);
        }
      });
    }

    const observer = new IntersectionObserver(startCounting, { threshold: 0.5 });
    const counters = document.querySelectorAll(".counter");

    counters.forEach(counter => observer.observe(counter)); 
  </script>
</div>


<!-- publications Display -->
<div class="container my-5 bb">
  <h2 class="text-center mb-5 fw-bold text-dark" style="letter-spacing: 1px;">Latest From Our Publications</h2>

  <div class="row g-4">
    {% for blog in blogs %}
    <div class="col-md-4">
      <div class="card blog-card h-100 border-0 shadow-sm rounded-4">
        <div class="card-body d-flex flex-column justify-content-between">
          <div>
            <h5 class="card-title fw-semibold text-primary">{{ blog[1] }}</h5>
            <h6 class="card-subtitle mb-2 text-muted small">{{ blog[3] }}</h6>
            <p class="card-text text-dark mt-3">{{ blog[2][:180] }}{% if blog[2]|length > 180 %}...{% endif %}</p>
          </div>
          <div class="mt-auto">
            <a href="/blog/{{ blog[0] }}" class="btn btn-outline-primary btn-sm fw-semibold px-4"
              style="transition: 0.3s;">Read More</a>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  {% if blogs|length == 3 %}
  <div class="text-center mt-4">
    <a href="/blogs" class="btn btn-primary px-5 py-2 rounded-pill fw-semibold"
      style="box-shadow: 0 4px 10px rgba(0,0,0,0.1);">View All Blogs</a>
  </div>
  {% endif %}
</div>

<!-- Campaigns Display -->
<div class="container my-5 bb">
  <h2 class="text-center mb-5 fw-bold text-dark" style="letter-spacing: 1px;">Latest From Our Campaigns</h2>

  <div class="row g-4">
    {% for campaign in campaigns %}
    <div class="col-md-4">
      <div class="card blog-card h-100 border-0 shadow-sm rounded-4">
        <div class="card-body d-flex flex-column justify-content-between">
          <div>
            <h5 class="card-title fw-semibold text-primary">{{ campaign[1] }}</h5>
            <h6 class="card-subtitle mb-2 text-muted small">{{ campaign[3] }}</h6>
            <p class="card-text text-dark mt-3">{{ campaign[2][:180] }}{% if campaign[2]|length > 180 %}...{% endif %}
            </p>
          </div>
          <div class="mt-auto">
            <a href="/campaign/{{ campaign[0] }}" class="btn btn-outline-primary btn-sm fw-semibold px-4"
              style="transition: 0.3s;">Read More</a>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  {% if campaigns|length == 3 %}
  <div class="text-center mt-4">
    <a href="/campaigns" class="btn btn-primary px-5 py-2 rounded-pill fw-semibold"
      style="box-shadow: 0 4px 10px rgba(0,0,0,0.1);">View All Campaigns</a>
  </div>
  {% endif %}
</div>

<!-- Events Display -->
<div class="container my-5 bb">
  <h2 class="text-center mb-5 fw-bold text-dark" style="letter-spacing: 1px;">Latest From Our Events</h2>

  <div class="row g-4">
    {% for event in events %}
    <div class="col-md-4">
      <div class="card blog-card h-100 border-0 shadow-sm rounded-4">
        <div class="card-body d-flex flex-column justify-content-between">
          <div>
            <h5 class="card-title fw-semibold text-primary">{{ event[1] }}</h5>
            <h6 class="card-subtitle mb-2 text-muted small">{{ event[3] }}</h6>
            <p class="card-text text-dark mt-3">{{ event[2][:180] }}{% if event[2]|length > 180 %}...{% endif %}</p>
          </div>
          <div class="mt-auto">
            <a href="/event/{{ event[0] }}" class="btn btn-outline-primary btn-sm fw-semibold px-4"
              style="transition: 0.3s;">Read More</a>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  {% if events|length == 3 %}
  <div class="text-center mt-4">
    <a href="/events" class="btn btn-primary px-5 py-2 rounded-pill fw-semibold"
      style="box-shadow: 0 4px 10px rgba(0,0,0,0.1);">View All Events</a>
  </div>
  {% endif %}
</div>



{% endblock %}